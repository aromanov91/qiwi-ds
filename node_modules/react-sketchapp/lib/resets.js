"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resetDocument = exports.resetLayer = void 0;

var _isNativeDocument = require("./utils/isNativeDocument");

var _isNativeSymbolsPage = require("./utils/isNativeSymbolsPage");

var resetLayer = function resetLayer(container) {
  if ((0, _isNativeDocument.default)(container)) {
    resetDocument(container); // eslint-disable-line

    return;
  }

  var layers = container.children(); // Skip last child since it is the container itself

  for (var l = 0; l < layers.count() - 1; l += 1) {
    var layer = layers.objectAtIndex(l);
    layer.removeFromParent();
  }
}; // Clear out all document pages and layers


exports.resetLayer = resetLayer;

var resetDocument = function resetDocument(documentData) {
  // Get Pages and delete them all (Except Symbols Page)
  var pages = documentData.pages();

  for (var index = pages.length - 1; index >= 0; index -= 1) {
    var page = pages[index]; // Don't delete symbols page

    if (!(0, _isNativeSymbolsPage.default)(page)) {
      if (pages.length > 1) {
        documentData.removePageAtIndex(index);
      } else {
        resetLayer(page);
      }
    }
  }
};

exports.resetDocument = resetDocument;